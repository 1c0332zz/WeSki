{% extends 'base.html' %}
{% load django_bootstrap5 %}
{% bootstrap_css %}
{% load static %}
{% bootstrap_javascript %}

<!--상단이미지-->
{% block content %}
  <section class="hero">
    <img src="https://i.esdrop.com/d/f/bvRLlOwptP/Ujal148nkZ.png" alt="ski login img">
    <div class="hero-content">
      <h2 class="text-center" style="text-shadow: -1px 0 #000, 0 1px #000, 1px 0 #000, 0 -1px #000;">마이페이지<h2></div>
      </section>

      <!--마이페이지-->
      <div class="container-fluid">
        <div class="row d-flex">

          <!-- 프로필 전체 영역 -->
          <div class="d-flex flex-column justify-content-center align-items-center" style="background-color: #f5f5f5; padding-top:50px;">

            <!-- 프로필 상단 영역 -->
            <div class="d-flex flex-row">
              <!-- 프로필 이미지 영역 -->
              <div class="me-5">
                {% if customer.image %}
                  <img src="{{ customer.image.url }}" class="rounded-circle" alt="profile_image">
                {% else %}
                  <img src="https://i.esdrop.com/d/f/bvRLlOwptP/D1wDSBrqJO.jpg" style="width: 200px; border-radius:50%" alt="default_profile_image">
                {% endif %}
              </div>
              <!-- {% if customer.image %} <img class="accoutns-detail-img-div" src="{{customer.image.url}}" alt="customer.image.url"> {% else %} -->
              <!-- <div> <img class="accounts-detail-img-div" src="" alt="customer.image.url" height="100" width="100"> </div>-->
              <!-- {% endif %} -->

              <!-- 프로필 상단/이미지 영역 제외 나머지 -->
              <div class="d-flex flex-column">
                <div>
                  <br><br>
                  <p class="detail_name_id">ID :
                    {{customer.username}}</p>
                  <p>email :
                    {{customer.email}}</p>

                </div>
              </div>
              {% if request.user.pk == customer.pk %}
                <div class="d-flex flex-column">
                  <div>
                    <a class="text-white " style="text-decoration: none;" href="{% url 'accounts:update' customer.pk %}">
                      <div class="accounts_detail_update text-center d-flex justify-content-center">
                        <!-- <img class=" maple_icon " src="" alt=""> -->
                        <p class="m-0">회원정보수정</p>
                      </div>
                    </a>
                    <a class="text-white" style="text-decoration: none;" href="{% url 'accounts:delete' customer.pk %}">
                      <div class="accounts_detail_delete text-center">
                        <p class="m-0">회원탈퇴</p>
                      </div>
                    </a>
                  </div>
                </div>
              {% endif %}
            </div>
          </div>
        </div>

        <!-- 유저 게시물 정보 -->
        <div class="tabmenu-div">
          <div class="tabmenu">
            <ul class="d-flex justify-content-between p-0">
              <li id="tab1" class="" style="width: 450px;">

                <label for="tabmenu1">작성 게시물 ({{customer.review_set.all|length}})</label>
                <div class="tabCon">
                  <h4>{{customer.username}}님의 작성글</h4>
                  {% for post in review_page %}
                    <a href="{% url 'reviews:detail' review.pk %}">
                      <p>{{ review.title }}</p>
                    </a>
                  {% endfor %}
                  <!--유저 게시물 정보 페이지네이션 -->
                  <div id="paging">
                    <ul class="pagination justify-content-center" style="margin-top: 2rem;">
                      <!-- 이전페이지 -->
                      {% if review_page.has_previous %}
                        <li class="page-item">
                          <a class="page-link" href="?&reviewpage={{ review_page.previous_page_number }}">이전</a>
                          <!-- href로 뎁스 설정 -->

                        {% else %}
                          <li class="page-item disabled">
                            <a class="page-link" tabindex="-1" aria-disabled="true" href="#">이전</a>
                          </li>
                        {% endif %}
                        <!-- 페이지리스트 -->
                        {% for page_number in review_page.paginator.page_range %}
                          {% if page_number == review_page.number %}
                            <li class="page-item active" aria-current="page">
                              <a class="page-link" href="?&reviewpage={{ page_number }}">{{ page_number }}</a>
                            </li>
                          {% else %}
                            <li class="page-item">
                              <a class="page-link" href="?&reviewpage={{ page_number }}">{{ page_number }}</a>
                            </li>
                          {% endif %}
                        {% endfor %}
                        <!-- 다음페이지 -->
                        {% if review_page.has_next %}
                          <li class="page-item">
                            <a class="page-link" href="?&reviewpage={{ review_page.next_page_number }}">다음</a>
                          </li>
                        {% else %}
                          <li class="page-item disabled">
                            <a class="page-link" tabindex="-1" aria-disabled="true" href="#">다음</a>
                          </li>
                        {% endif %}
                      </ul>
                    </div>
                    <!-- 페이징끝 -->
                  </div>
                </li>
              </ul>
            </div>
          </div>

          <style>
            * {
              margin: 0;
              padding: 0;
              font-size: 15px;
              line-height: 1.3;
            }

            ul {
              list-style: none;
            }

            .tabmenu-div {
              margin-top: 45px;
              width: 100%;
              height: 30rem;
            }

            .tabmenu {
              padding: 0 200px;
              width: 100%;
              margin: 0 auto;
              position: relative;
            }

            .tabmenu ul {
              position: relative;
            }

            .tabmenu ul li {
              display: inline-block;
              width: 33.33%;
              float: left;
              text-align: center;
              background: #f9f9f9;
              line-height: 40px;
            }

            .tabmenu label {
              display: block;
              width: 100%;
              height: 40px;
              line-height: 40px;
            }

            .tabmenu input {
              display: none;
            }

            .tabCon {
              display: none;
              width: 100%;
              text-align: left;
              padding: 20px;
              position: absolute;
              left: 0;
              top: 40px;
              box-sizing: border-box;
              border: 5px solid #f9f9f9;
            }
          </style>

        {% endblock content %}
